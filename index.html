<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚗 R.M. Estética PRO+ - Sistema Completo</title>
    
    <!-- External CDN Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body data-theme="dark">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="modal-overlay">
        <div class="loading-content">
            <div class="loading-spinner">
                <i class="fas fa-car-wash"></i>
            </div>
            <h3>🚗 Carregando R.M. Estética PRO+</h3>
            <p>Preparando o sistema...</p>
        </div>
    </div>

    <!-- Offline Indicator -->
    <div id="offline-indicator" role="alert" aria-live="assertive">
        <i class="fas fa-wifi-slash"></i>
        <span>📶 Conexão perdida - Modo offline</span>
    </div>

    <!-- Back to Top Button -->
    <button id="back-to-top-btn" title="Voltar ao topo">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Header -->
        <header>
            <h1>
                <i class="fas fa-car-wash"></i>
                🚗 R.M. Estética PRO+
            </h1>
            <div class="header-controls">
                <button class="theme-toggle-btn" id="theme-toggle-btn" title="🎨 Alternar tema">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="sync-btn" id="sync-btn" title="📡 Status de sincronização">
                    <i class="fas fa-check-circle"></i>
                </button>
            </div>
        </header>

        <!-- Navigation -->
        <nav role="navigation" aria-label="Navegação Principal">
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i>
                <span>📊 Painel</span>
            </button>
            <button class="nav-btn" data-tab="clientes">
                <i class="fas fa-users"></i>
                <span>👥 Clientes</span>
            </button>
            <button class="nav-btn" data-tab="servicos">
                <i class="fas fa-tools"></i>
                <span>🔧 Serviços</span>
            </button>
            <button class="nav-btn" data-tab="novo-orcamento">
                <i class="fas fa-file-invoice"></i>
                <span>📝 Orçamento</span>
            </button>
            <button class="nav-btn" data-tab="historico">
                <i class="fas fa-history"></i>
                <span>📋 Histórico</span>
            </button>
            <button class="nav-btn" data-tab="crm">
                <i class="fas fa-handshake"></i>
                <span>💬 CRM</span>
            </button>
            <button class="nav-btn" data-tab="despesas">
                <i class="fas fa-credit-card"></i>
                <span>💰 Despesas</span>
            </button>
            <button class="nav-btn" data-tab="configuracoes">
                <i class="fas fa-cog"></i>
                <span>⚙️ Config</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main>
            <!-- Dashboard Tab -->
            <section id="dashboard-tab" class="tab-content active" role="tabpanel">
                <div class="dashboard-main-grid">
                    <!-- Metrics Cards -->
                    <div class="metrics-section">
                        <div class="stat-card metric-bounce" data-filter="clientes">
                            <i class="fas fa-users"></i>
                            <div>
                                <h3>👥 Total de Clientes</h3>
                                <p id="stat-clientes">0</p>
                            </div>
                        </div>
                        <div class="stat-card metric-bounce" data-filter="pendentes">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h3>⏳ Orçamentos Pendentes</h3>
                                <p id="stat-pendentes">0</p>
                            </div>
                        </div>
                        <div class="stat-card metric-bounce" data-filter="aprovados">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>👍 Aprovados</h3>
                                <p id="stat-aprovados">0</p>
                            </div>
                        </div>
                        <div class="stat-card metric-bounce" data-filter="finalizados">
                            <i class="fas fa-trophy"></i>
                            <div>
                                <h3>🏆 Finalizados no Mês</h3>
                                <p id="stat-finalizados-mes">0</p>
                            </div>
                        </div>
                        <div class="stat-card metric-bounce">
                            <i class="fas fa-dollar-sign"></i>
                            <div>
                                <h3>💰 Faturamento Total</h3>
                                <p id="stat-faturamento-total">R$ 0,00</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chart and Recent Activity -->
                    <div class="dashboard-side-content">
                        <div class="card">
                            <h2><i class="fas fa-chart-bar"></i> 📊 Estatísticas Mensais</h2>
                            <div class="chart-container">
                                <canvas id="monthly-finalized-chart-canvas"></canvas>
                            </div>
                        </div>
                        
                        <div class="card data-list">
                            <h2><i class="fas fa-clock"></i> 🕐 Atividade Recente</h2>
                            <ul id="recent-activity-list">
                                <div class="empty-list-message">
                                    <p>📭 Nenhuma atividade recente</p>
                                    <small>Crie seu primeiro orçamento para começar</small>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clientes Tab -->
            <section id="clientes-tab" class="tab-content" role="tabpanel">
                <div class="grid-layout">
                    <div class="card">
                        <h2 id="cliente-form-title"><i class="fas fa-user-plus"></i> 👤 Cadastrar Cliente</h2>
                        <form id="cliente-form">
                            <input type="hidden" id="cliente-id">
                            
                            <div class="form-group">
                                <label for="cliente-nome">👤 Nome Completo *</label>
                                <input type="text" id="cliente-nome" required placeholder="Digite o nome completo" minlength="2">
                                <div class="validation-message">Nome é obrigatório (mínimo 2 caracteres)</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-telefone">📱 Telefone *</label>
                                <input type="tel" id="cliente-telefone" required placeholder="(99) 99999-9999" maxlength="15">
                                <div class="validation-message">Telefone deve ter formato (XX) XXXXX-XXXX</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-carro">🚗 Carro *</label>
                                <input type="text" id="cliente-carro" required placeholder="Ex: Honda Civic 2020" minlength="3">
                                <div class="validation-message">Carro é obrigatório (mínimo 3 caracteres)</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-placa">🚙 Placa *</label>
                                <input type="text" id="cliente-placa" required placeholder="ABC-1234 ou ABC1D23" maxlength="8">
                                <div class="validation-message">Placa deve ter formato ABC-1234 ou ABC1D23</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-hover-effect">
                                    <i class="fas fa-save"></i> <span>💾 Salvar Cliente</span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-cliente" style="display: none;">
                                    <i class="fas fa-times"></i> <span>❌ Cancelar Edição</span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-users"></i> 📋 Lista de Clientes</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-cliente" placeholder="🔍 Buscar por nome, placa ou telefone...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="control-buttons">
                                <div class="sort-container">
                                    <select id="sort-clientes" class="form-control">
                                        <option value="nome-asc">👤 Nome (A-Z)</option>
                                        <option value="nome-desc">👤 Nome (Z-A)</option>
                                        <option value="carro-asc">🚗 Carro (A-Z)</option>
                                        <option value="carro-desc">🚗 Carro (Z-A)</option>
                                        <option value="created_at-desc">🆕 Mais Recentes</option>
                                        <option value="created_at-asc">📅 Mais Antigos</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-sm btn-secondary btn-hover-effect" id="export-clientes-csv">
                                    <i class="fas fa-download"></i> <span>📥 Exportar</span>
                                </button>
                            </div>
                        </div>

                        <ul id="clientes-lista">
                            <div class="empty-list-message">
                                <p>📭 Nenhum cliente cadastrado</p>
                                <small>Cadastre o primeiro cliente para começar</small>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Serviços Tab -->
            <section id="servicos-tab" class="tab-content" role="tabpanel">
                <div class="grid-layout">
                    <div class="card">
                        <h2 id="servico-form-title"><i class="fas fa-plus"></i> 🔧 Cadastrar Serviço</h2>
                        <form id="servico-form">
                            <input type="hidden" id="servico-id">
                            
                            <div class="form-group">
                                <label for="servico-descricao">🔧 Descrição *</label>
                                <input type="text" id="servico-descricao" required placeholder="Ex: Lavagem completa" minlength="3">
                                <div class="validation-message">Descrição é obrigatória (mínimo 3 caracteres)</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="servico-valor">💰 Valor (R$) *</label>
                                <input type="number" id="servico-valor" required step="0.01" min="0.01" placeholder="0.00" max="9999.99">
                                <div class="validation-message">Valor deve ser maior que zero</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-hover-effect">
                                    <i class="fas fa-save"></i> <span>💾 Salvar Serviço</span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-servico" style="display: none;">
                                    <i class="fas fa-times"></i> <span>❌ Cancelar Edição</span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-tools"></i> 🛠️ Lista de Serviços</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-servico" placeholder="🔍 Buscar por descrição...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="control-buttons">
                                <div class="sort-container">
                                    <select id="sort-servicos" class="form-control">
                                        <option value="descricao-asc">🔧 Descrição (A-Z)</option>
                                        <option value="descricao-desc">🔧 Descrição (Z-A)</option>
                                        <option value="valor-asc">💰 Valor (Menor)</option>
                                        <option value="valor-desc">💰 Valor (Maior)</option>
                                        <option value="created_at-desc">🆕 Mais Recentes</option>
                                        <option value="created_at-asc">📅 Mais Antigos</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <ul id="servicos-lista">
                            <div class="empty-list-message">
                                <p>📭 Nenhum serviço cadastrado</p>
                                <small>Cadastre o primeiro serviço para começar</small>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Novo Orçamento Tab -->
            <section id="novo-orcamento-tab" class="tab-content" role="tabpanel">
                <div class="card">
                    <h2 id="orcamento-form-title"><i class="fas fa-file-invoice"></i> 📝 Novo Orçamento</h2>
                    <form id="orcamento-form">
                        <input type="hidden" id="orcamento-id-to-edit">
                        
                        <div class="form-group">
                            <label for="orcamento-cliente">👤 Cliente *</label>
                            <select id="orcamento-cliente" class="form-control" required>
                                <option value="">Selecione um cliente</option>
                            </select>
                            <div class="validation-message">Selecione um cliente</div>
                        </div>

                        <div class="service-selection">
                            <div class="form-group">
                                <label for="orcamento-servico-select">🔧 Serviço</label>
                                <select id="orcamento-servico-select" class="form-control">
                                    <option value="">Selecione um serviço</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="orcamento-servico-quantidade">🔢 Quantidade</label>
                                <input type="number" id="orcamento-servico-quantidade" class="form-control" min="1" value="1" max="99">
                            </div>
                            
                            <button type="button" class="btn btn-secondary btn-hover-effect" id="add-servico-btn">
                                <i class="fas fa-plus"></i> <span>➕ Adicionar</span>
                            </button>
                        </div>

                        <div class="services-added">
                            <h3><i class="fas fa-list"></i> 📋 Serviços Adicionados</h3>
                            <ul id="orcamento-servicos-adicionados">
                                <p style="text-align: center; color: var(--color-text-secondary);">📭 Nenhum serviço adicionado</p>
                            </ul>
                        </div>

                        <div class="form-group">
                            <label for="orcamento-desconto">🎯 Desconto (R$)</label>
                            <input type="number" id="orcamento-desconto" class="form-control" step="0.01" min="0" value="0" placeholder="0.00" max="9999.99">
                        </div>

                        <div class="form-group">
                            <label>💳 Formas de Pagamento * (Selecione uma ou mais)</label>
                            <div id="payment-options" class="payment-options-checkboxes">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="payment-pix" value="Pix">
                                    <label for="payment-pix" class="checkbox-label">
                                        <i class="fab fa-pix"></i>
                                        <span>💰 Pix</span>
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="payment-dinheiro" value="Dinheiro">
                                    <label for="payment-dinheiro" class="checkbox-label">
                                        <i class="fas fa-money-bill"></i>
                                        <span>💵 Dinheiro</span>
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="payment-credito" value="Crédito">
                                    <label for="payment-credito" class="checkbox-label">
                                        <i class="fas fa-credit-card"></i>
                                        <span>💳 Crédito</span>
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="payment-debito" value="Débito">
                                    <label for="payment-debito" class="checkbox-label">
                                        <i class="fas fa-credit-card"></i>
                                        <span>💸 Débito</span>
                                    </label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="checkbox" id="payment-boleto" value="Boleto">
                                    <label for="payment-boleto" class="checkbox-label">
                                        <i class="fas fa-barcode"></i>
                                        <span>🧾 Boleto</span>
                                    </label>
                                </div>
                            </div>
                            <div id="payment-options-validation" class="validation-message" style="display: none;">
                                Selecione pelo menos uma forma de pagamento
                            </div>
                        </div>

                        <div id="orcamento-total" class="orcamento-total-display">
                            <strong>💰 Total: R$ 0,00</strong>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-hover-effect">
                                <i class="fas fa-save"></i> <span>💾 Salvar Orçamento</span>
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancelar-edicao-orcamento" style="display: none;">
                                <i class="fas fa-times"></i> <span>❌ Cancelar Edição</span>
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Histórico Tab -->
            <section id="historico-tab" class="tab-content" role="tabpanel">
                <div class="historico-layout">
                    <div class="card data-list">
                        <h2><i class="fas fa-history"></i> 📋 Histórico de Orçamentos</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-historico" placeholder="🔍 Buscar por cliente, placa ou data...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="filter-controls">
                                <select id="filter-status" class="form-control">
                                    <option value="">📊 Todos os Status</option>
                                    <option value="Orçamento">📝 Orçamento</option>
                                    <option value="Aprovado">👍 Aprovado</option>
                                    <option value="Pago">💰 Pago</option>
                                    <option value="Finalizado">✅ Finalizado</option>
                                    <option value="Cancelado">❌ Cancelado</option>
                                </select>
                                
                                <button class="btn btn-sm btn-secondary btn-hover-effect" id="clear-filters-btn">
                                    <i class="fas fa-eraser"></i> <span>🧹 Limpar</span>
                                </button>
                            </div>
                        </div>

                        <ul id="historico-lista">
                            <div class="empty-list-message">
                                <p>📭 Nenhum orçamento encontrado</p>
                                <small>Crie o primeiro orçamento para começar</small>
                            </div>
                        </ul>
                    </div>

                    <div class="card" id="detalhes-panel" style="display: none;">
                        <h2><i class="fas fa-file-alt"></i> 📄 Detalhes do Orçamento</h2>
                        
                        <div class="detalhe-view-switcher">
                            <button class="detalhe-view-btn active" data-view="orcamento">
                                <i class="fas fa-file-invoice"></i> <span>📄 Orçamento</span>
                            </button>
                            <button class="detalhe-view-btn" data-view="recibo">
                                <i class="fas fa-receipt"></i> <span>🧾 Recibo</span>
                            </button>
                        </div>

                        <div id="detalhes-orcamento" class="detalhe-content">
                            <h3><i class="fas fa-file-invoice"></i> 📄 Orçamento Detalhado</h3>
                            <pre id="texto-orcamento">Selecione um orçamento da lista para ver os detalhes aqui.</pre>
                            
                            <div class="detalhe-actions">
                                <button class="btn btn-sm btn-secondary btn-hover-effect" onclick="copyText('orcamento')">
                                    <i class="fas fa-copy"></i> <span>📋 Copiar</span>
                                </button>
                                <button class="btn btn-sm btn-primary btn-hover-effect" onclick="baixarPDF('orcamento')">
                                    <i class="fas fa-file-pdf"></i> <span>📄 PDF</span>
                                </button>
                                <button class="btn btn-sm btn-success btn-hover-effect" onclick="enviarWhatsApp('orcamento')">
                                    <i class="fab fa-whatsapp"></i> <span>📱 WhatsApp</span>
                                </button>
                            </div>
                        </div>

                        <div id="detalhes-recibo" class="detalhe-content" style="display: none;">
                            <h3><i class="fas fa-receipt"></i> 🧾 Recibo de Pagamento</h3>
                            <pre id="texto-recibo">Selecione um orçamento da lista para ver os detalhes aqui.</pre>
                            
                            <div class="detalhe-actions">
                                <button class="btn btn-sm btn-secondary btn-hover-effect" onclick="copyText('recibo')">
                                    <i class="fas fa-copy"></i> <span>📋 Copiar</span>
                                </button>
                                <button class="btn btn-sm btn-primary btn-hover-effect" onclick="baixarPDF('recibo')">
                                    <i class="fas fa-file-pdf"></i> <span>📄 PDF</span>
                                </button>
                                <button class="btn btn-sm btn-success btn-hover-effect" onclick="enviarWhatsApp('recibo')">
                                    <i class="fab fa-whatsapp"></i> <span>📱 WhatsApp</span>
                                </button>
                            </div>
                        </div>

                        <div class="status-actions">
                            <button class="btn btn-success btn-sm btn-hover-effect" onclick="alterarStatus('Pago')">
                                <i class="fas fa-dollar-sign"></i> <span>💰 Marcar Pago</span>
                            </button>
                            <button class="btn btn-primary btn-sm btn-hover-effect" onclick="alterarStatus('Aprovado')">
                                <i class="fas fa-thumbs-up"></i> <span>👍 Aprovar</span>
                            </button>
                            <button class="btn btn-warning btn-sm btn-hover-effect" onclick="editarOrcamento()">
                                <i class="fas fa-edit"></i> <span>✏️ Editar</span>
                            </button>
                            <button class="btn btn-danger btn-sm btn-hover-effect" onclick="excluirOrcamento()">
                                <i class="fas fa-trash"></i> <span>🗑️ Excluir</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CRM Tab -->
            <section id="crm-tab" class="tab-content" role="tabpanel">
                <div class="metrics-grid">
                    <div class="metric-card metric-bounce">
                        <h3>💬 Total de Interações</h3>
                        <p id="crm-total-interactions">0</p>
                    </div>
                    <div class="metric-card metric-bounce">
                        <h3>👥 Clientes Ativos</h3>
                        <p id="crm-active-clients">0</p>
                    </div>
                    <div class="metric-card metric-bounce">
                        <h3>📞 Follow-ups Pendentes</h3>
                        <p id="crm-pending-followups">0</p>
                    </div>
                </div>

                <div class="card">
                    <h2><i class="fas fa-plus-circle"></i> 📝 Registrar Nova Interação</h2>
                    <form id="crm-interaction-form">
                        <div class="form-group">
                            <label for="interaction-client">👤 Cliente *</label>
                            <select id="interaction-client" class="form-control" required>
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="interaction-type">📞 Tipo de Interação *</label>
                            <select id="interaction-type" class="form-control" required>
                                <option value="">Selecione o tipo</option>
                                <option value="WhatsApp">📱 WhatsApp</option>
                                <option value="Telefone">☎️ Telefone</option>
                                <option value="E-mail">📧 E-mail</option>
                                <option value="Presencial">🏢 Presencial</option>
                                <option value="Instagram">📸 Instagram</option>
                                <option value="Facebook">👍 Facebook</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="interaction-notes">📝 Observações</label>
                            <textarea id="interaction-notes" class="form-control" placeholder="Descreva brevemente a interação..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="interaction-date">📅 Data *</label>
                            <input type="date" id="interaction-date" class="form-control" required>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-hover-effect">
                                <i class="fas fa-save"></i> <span>💾 Registrar Interação</span>
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Despesas Tab -->
            <section id="despesas-tab" class="tab-content" role="tabpanel">
                <div class="metrics-grid">
                    <div class="metric-card metric-bounce">
                        <h3>📅 Total do Mês</h3>
                        <p id="despesas-total-mes">R$ 0,00</p>
                    </div>
                    <div class="metric-card metric-bounce">
                        <h3>📆 Despesas de Hoje</h3>
                        <p id="despesas-hoje">R$ 0,00</p>
                    </div>
                    <div class="metric-card metric-bounce">
                        <h3>📊 Média Diária</h3>
                        <p id="despesas-media-diaria">R$ 0,00</p>
                    </div>
                </div>

                <div class="main-layout">
                    <div class="card">
                        <h2 id="despesa-form-title"><i class="fas fa-plus"></i> 💰 Nova Despesa</h2>
                        <form id="despesa-form">
                            <input type="hidden" id="despesa-id">
                            
                            <div class="form-group">
                                <label for="despesa-descricao">📝 Descrição *</label>
                                <input type="text" id="despesa-descricao" class="form-control" required placeholder="Ex: Compra de produtos" minlength="3">
                                <div class="validation-message">Descrição é obrigatória (mínimo 3 caracteres)</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="despesa-valor">💰 Valor (R$) *</label>
                                <input type="number" id="despesa-valor" class="form-control" required step="0.01" min="0.01" placeholder="0.00" max="99999.99">
                                <div class="validation-message">Valor deve ser maior que zero</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="despesa-categoria">📂 Categoria *</label>
                                <select id="despesa-categoria" class="form-control" required>
                                    <option value="">Selecione uma categoria</option>
                                    <option value="Produtos">🧴 Produtos</option>
                                    <option value="Equipamentos">🔧 Equipamentos</option>
                                    <option value="Marketing">📢 Marketing</option>
                                    <option value="Combustível">⛽ Combustível</option>
                                    <option value="Manutenção">🔨 Manutenção</option>
                                    <option value="Aluguel">🏠 Aluguel</option>
                                    <option value="Água/Luz">💡 Água/Luz</option>
                                    <option value="Telefone/Internet">📞 Telefone/Internet</option>
                                    <option value="Outros">📦 Outros</option>
                                </select>
                                <div class="validation-message">Selecione uma categoria</div>
                            </div>

                            <div class="form-group">
                                <label for="despesa-data">📅 Data *</label>
                                <input type="date" id="despesa-data" class="form-control" required>
                                <div class="validation-message">Data é obrigatória</div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-hover-effect">
                                    <i class="fas fa-save"></i> <span>💾 Salvar Despesa</span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-despesa" style="display: none;">
                                    <i class="fas fa-times"></i> <span>❌ Cancelar Edição</span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-credit-card"></i> 💳 Lista de Despesas</h2>
                        
                        <div class="list-controls">
                            <div class="control-buttons">
                                <input type="month" id="filter-despesas-mes" class="form-control" title="Filtrar por mês">
                            </div>
                        </div>

                        <ul id="despesas-lista" class="expandable-list">
                            <div class="empty-list-message">
                                <p>📭 Nenhuma despesa cadastrada</p>
                                <small>Registre a primeira despesa para começar</small>
                            </div>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h2><i class="fas fa-chart-pie"></i> 📊 Despesas por Categoria</h2>
                    <div class="chart-container">
                        <canvas id="despesas-chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Configurações Tab -->
            <section id="configuracoes-tab" class="tab-content" role="tabpanel">
                <div class="config-grid">
                    <div class="card">
                        <h2><i class="fas fa-building"></i> 🏢 Dados da Empresa</h2>
                        <form id="empresa-form">
                            <div class="form-group">
                                <label for="empresa-nome">🏢 Nome da Empresa *</label>
                                <input type="text" id="empresa-nome" class="form-control" required placeholder="Nome da empresa">
                            </div>
                            
                            <div class="form-group">
                                <label for="empresa-cnpj">📄 CNPJ</label>
                                <input type="text" id="empresa-cnpj" class="form-control" placeholder="00.000.000/0000-00">
                            </div>
                            
                            <div class="form-group">
                                <label for="empresa-telefone">📞 Telefone</label>
                                <input type="tel" id="empresa-telefone" class="form-control" placeholder="(99) 99999-9999">
                            </div>
                            
                            <div class="form-group">
                                <label for="empresa-endereco">📍 Endereço</label>
                                <textarea id="empresa-endereco" class="form-control" rows="3" placeholder="Endereço completo"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="empresa-agradecimento">💌 Mensagem de Agradecimento</label>
                                <textarea id="empresa-agradecimento" class="form-control" rows="2" placeholder="Obrigado pela preferência!"></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-hover-effect">
                                    <i class="fas fa-save"></i> 💾 Salvar Dados
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="card">
                        <h2><i class="fas fa-palette"></i> 🎨 Aparência</h2>
                        <div class="theme-options">
                            <div class="theme-option">
                                <input type="radio" id="theme-auto" name="theme-choice" value="auto" checked>
                                <label for="theme-auto" class="theme-label">
                                    <i class="fas fa-magic"></i>
                                    <span>🤖 Automático</span>
                                    <small>Seguir sistema</small>
                                </label>
                            </div>
                            <div class="theme-option">
                                <input type="radio" id="theme-light" name="theme-choice" value="light">
                                <label for="theme-light" class="theme-label">
                                    <i class="fas fa-sun"></i>
                                    <span>☀️ Claro</span>
                                    <small>Sempre claro</small>
                                </label>
                            </div>
                            <div class="theme-option">
                                <input type="radio" id="theme-dark" name="theme-choice" value="dark">
                                <label for="theme-dark" class="theme-label">
                                    <i class="fas fa-moon"></i>
                                    <span>🌙 Escuro</span>
                                    <small>Sempre escuro</small>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Global Modals and Overlays -->
    <div id="notification">
        <span id="notification-message"></span>
    </div>

    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title">❓ Confirmação</h3>
            <p id="modal-message">Tem certeza que deseja realizar esta ação?</p>
            <div class="modal-actions">
                <button class="btn btn-primary btn-hover-effect" id="modal-confirm-btn">✅ Confirmar</button>
                <button class="btn btn-secondary" id="modal-cancel-btn">❌ Cancelar</button>
            </div>
        </div>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script src="app.js"></script>
</body>
</html>