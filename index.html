<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R.M. Est√©tica PRO+ - Sistema de Gerenciamento</title>
    
    <!-- External CDN Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
/* CSS Variables - Dark Theme */
:root {
  /* Colors */
  --bg-dark: #1a202c;
  --bg-card: #2d3748;
  --bg-input: #374151;
  --text-light: #f7fafc;
  --text-muted: #a0aec0;
  --primary-red: #dc2626;
  --primary-red-dark: #b91c1c;
  --accent-green: #16a34a;
  --accent-green-dark: #15803d;
  --accent-blue: #2563eb;
  --accent-blue-dark: #1d4ed8;
  --accent-orange: #ea580c;
  --accent-orange-dark: #c2410c;
  --accent-red-status: #ef4444;
  --border-color: #4a5568;
  --shadow-color: rgba(0, 0, 0, 0.3);
  --header-border: #4a5568;
  --skeleton-base: #2d3748;
  --skeleton-highlight: #374151;
  
  /* Typography */
  --font-inter: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-poppins: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  
  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  
  /* Border Radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  
  /* Transitions */
  --transition-fast: 0.15s ease-in-out;
  --transition-normal: 0.3s ease-in-out;
  --transition-slow: 0.5s ease-in-out;
}

/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-inter);
  background-color: var(--bg-dark);
  color: var(--text-light);
  line-height: 1.6;
  overflow-x: hidden;
  display: flex;
  justify-content: center;
  min-height: 100vh;
  padding: 20px;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-poppins);
  font-weight: 600;
  margin-bottom: var(--spacing-md);
}

h1 { font-size: 2.5rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.75rem; }
h4 { font-size: 1.5rem; }
h5 { font-size: 1.25rem; }
h6 { font-size: 1rem; }

/* Main App Container */
.app-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0;
  border-radius: var(--radius-xl);
  box-shadow: 0 25px 50px -12px var(--shadow-color);
  display: flex;
  flex-direction: column;
  background-color: var(--bg-card);
  min-height: calc(100vh - 40px);
}

/* Header */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg) var(--spacing-xl);
  border-bottom: 2px solid var(--header-border);
  position: sticky;
  top: 0;
  z-index: 100;
  background-color: var(--bg-card);
  border-radius: var(--radius-xl) var(--radius-xl) 0 0;
}

header h1 {
  color: var(--text-light);
  font-size: 1.875rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: 0;
}

header h1 i {
  color: var(--primary-red);
  font-size: 2rem;
}

.sync-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 1.5rem;
  transition: var(--transition-normal);
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
}

.sync-btn:hover {
  color: var(--accent-blue);
  transform: rotate(15deg);
}

.sync-btn.syncing {
  animation: spin 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
  color: var(--accent-blue);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Navigation */
nav {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  padding: var(--spacing-lg) var(--spacing-xl);
  background-color: var(--bg-dark);
  border-bottom: 1px solid var(--border-color);
}

.nav-btn {
  padding: var(--spacing-md) var(--spacing-lg);
  background-color: var(--bg-input);
  color: var(--text-muted);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-normal);
  font-size: 0.875rem;
  font-weight: 500;
  text-align: center;
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.nav-btn:hover {
  background-color: var(--border-color);
  color: var(--text-light);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.nav-btn.active {
  background-color: var(--primary-red);
  color: white;
  font-weight: bold;
  box-shadow: 0 8px 16px rgba(220, 38, 38, 0.4);
  transform: translateY(-2px);
}

.nav-btn i {
  font-size: 1rem;
}

@media (min-width: 600px) {
  .nav-btn {
    flex-grow: 0;
    min-width: 120px;
  }
}

/* Tab Content */
.tab-content {
  display: none;
  animation: fadeInScale 0.6s ease-out;
  transform-origin: top;
  padding: var(--spacing-xl);
  flex-grow: 1;
}

.tab-content.active {
  display: block;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Grid Layouts */
.grid-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

@media (min-width: 768px) {
  .grid-layout {
    grid-template-columns: 1fr 1.5fr;
  }
}

.historico-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

@media (min-width: 992px) {
  .historico-layout {
    grid-template-columns: 1fr 1.5fr;
  }
}

.dashboard-main-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

@media (min-width: 768px) {
  .dashboard-main-grid {
    grid-template-columns: 1.8fr 1fr;
  }
}

.main-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
  margin-bottom: var(--spacing-xl);
}

@media (min-width: 768px) {
  .main-layout {
    grid-template-columns: 1fr 1.5fr;
  }
}

.crm-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-xl);
}

@media (min-width: 768px) {
  .crm-grid {
    grid-template-columns: 1fr 1fr;
  }
}

@media (min-width: 1280px) {
  .crm-grid {
    grid-template-columns: 1fr 1fr 1fr;
  }
  
  .crm-grid .card:nth-child(3) {
    grid-column: span 2;
  }
}

/* Cards */
.card {
  background-color: var(--bg-card);
  padding: var(--spacing-xl);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin-bottom: var(--spacing-xl);
  transition: var(--transition-normal);
}

.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.card h2 {
  margin-top: 0;
  margin-bottom: var(--spacing-lg);
  color: var(--primary-red);
  border-bottom: 2px solid var(--border-color);
  padding-bottom: var(--spacing-md);
  font-size: 1.5rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.card h2 i {
  color: var(--accent-blue);
  font-size: 1.25rem;
}

/* Dashboard Metrics */
.metrics-section {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-lg);
}

@media (min-width: 640px) {
  .metrics-section {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .metrics-section {
    grid-template-columns: repeat(3, 1fr);
  }
}

.stat-card {
  background-color: var(--bg-input);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border-left: 5px solid var(--accent-blue);
  cursor: pointer;
  transition: var(--transition-normal);
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
  border-left-color: var(--primary-red);
}

.stat-card i {
  font-size: 2rem;
  color: var(--accent-blue);
}

.stat-card h3 {
  font-size: 0.875rem;
  color: var(--text-muted);
  margin-bottom: var(--spacing-xs);
  text-transform: uppercase;
  font-weight: 500;
}

.stat-card p {
  font-size: 1.875rem;
  font-weight: 700;
  color: var(--text-light);
  margin: 0;
}

/* Metrics Grid */
.metrics-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

@media (min-width: 768px) {
  .metrics-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

.metric-card {
  background-color: var(--bg-input);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  text-align: center;
  border-left: 5px solid var(--accent-blue);
  transition: var(--transition-normal);
}

.metric-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.metric-card h3 {
  font-size: 0.875rem;
  color: var(--text-muted);
  text-transform: uppercase;
  margin-bottom: var(--spacing-sm);
}

.metric-card p {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-light);
  margin: 0;
}

/* Forms */
.form-group {
  margin-bottom: var(--spacing-lg);
  position: relative;
}

.form-group label {
  display: block;
  margin-bottom: var(--spacing-sm);
  color: var(--text-muted);
  font-size: 0.875rem;
  font-weight: 500;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: var(--spacing-md);
  background-color: var(--bg-input);
  border: 1.5px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-light);
  font-size: 1rem;
  transition: var(--transition-normal);
  outline: none;
  font-family: var(--font-inter);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.form-group input[type="date"],
.form-group input[type="month"] {
  color-scheme: dark;
}

/* Form Validation */
.form-group input:invalid:not(:focus):not(:placeholder-shown) {
  border-color: var(--accent-red-status);
}

.form-group .validation-message {
  color: var(--accent-red-status);
  font-size: 0.75rem;
  margin-top: var(--spacing-xs);
  display: none;
}

.form-group input:invalid:not(:focus):not(:placeholder-shown) + .validation-message {
  display: block;
}

.form-group .validation-icon {
  position: absolute;
  right: var(--spacing-md);
  top: 50%;
  transform: translateY(-50%);
  font-size: 1rem;
  display: none;
}

.form-group input:not(:placeholder-shown):valid + .validation-message + .validation-icon {
  color: var(--accent-green);
  display: block;
}

.form-group input:invalid:not(:focus):not(:placeholder-shown) + .validation-message + .validation-icon {
  color: var(--accent-red-status);
  display: block;
}

/* Hide validation icons for selects and special cases */
.form-group select + .validation-message + .validation-icon,
.form-group input:not(:required) + .validation-message + .validation-icon,
.form-group input:focus + .validation-message + .validation-icon,
.form-group input:placeholder-shown + .validation-message + .validation-icon {
  display: none;
}

/* Search Container */
.search-container {
  position: relative;
  margin-bottom: var(--spacing-md);
}

.search-container input {
  padding-left: 2.5rem;
}

.search-container i {
  position: absolute;
  left: var(--spacing-md);
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 1rem;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-weight: 500;
  text-transform: uppercase;
  font-size: 0.875rem;
  transition: var(--transition-normal);
  width: 100%;
  text-align: center;
  margin-top: var(--spacing-sm);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  font-family: var(--font-inter);
}

@media (min-width: 992px) {
  .btn {
    width: auto;
  }
}

.btn:active {
  transform: translateY(1px);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.btn-primary {
  background-color: var(--primary-red);
  color: white;
}

.btn-primary:hover {
  background-color: var(--primary-red-dark);
  box-shadow: 0 4px 8px rgba(220, 38, 38, 0.3);
}

.btn-secondary {
  background-color: #475569;
  color: var(--text-light);
}

.btn-secondary:hover {
  background-color: #64748b;
  box-shadow: 0 4px 8px rgba(71, 85, 105, 0.3);
}

.btn-success {
  background-color: var(--accent-green);
  color: white;
}

.btn-success:hover {
  background-color: var(--accent-green-dark);
  box-shadow: 0 4px 8px rgba(22, 163, 74, 0.3);
}

.btn-warning {
  background-color: var(--accent-orange);
  color: white;
}

.btn-warning:hover {
  background-color: var(--accent-orange-dark);
  box-shadow: 0 4px 8px rgba(234, 88, 12, 0.3);
}

.btn-danger {
  background-color: var(--accent-red-status);
  color: white;
}

.btn-danger:hover {
  background-color: #dc2626;
  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
}

.btn-sm {
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 0.75rem;
  width: auto;
}

/* Form Actions */
.form-actions {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
  margin-top: var(--spacing-xl);
}

.form-actions .btn {
  flex: 1;
  margin-top: 0;
}

/* List Controls */
.list-controls {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

@media (min-width: 768px) {
  .list-controls {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }
}

.filter-controls {
  display: flex;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

.sort-container select {
  padding: var(--spacing-sm) var(--spacing-md);
  background-color: var(--bg-input);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  color: var(--text-light);
  font-size: 0.875rem;
}

/* Data Lists */
.data-list ul {
  list-style: none;
  padding: 0;
  max-height: 500px;
  overflow-y: auto;
  margin-top: var(--spacing-md);
}

.data-list ul::-webkit-scrollbar {
  width: 8px;
}

.data-list ul::-webkit-scrollbar-track {
  background-color: var(--bg-input);
  border-radius: var(--radius-md);
}

.data-list ul::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border-radius: var(--radius-md);
}

.data-list ul::-webkit-scrollbar-thumb:hover {
  background-color: var(--text-muted);
}

.data-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg);
  background-color: var(--bg-input);
  border-radius: var(--radius-md);
  margin-bottom: var(--spacing-md);
  flex-wrap: wrap;
  gap: var(--spacing-md);
  border-left: 5px solid var(--border-color);
  transition: var(--transition-normal);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.data-list li.editing {
  border-left: 5px solid var(--accent-orange);
}

.data-list li:hover {
  border-left-color: var(--primary-red);
  background-color: #2b3a4e;
  transform: translateX(4px);
}

.data-list li.selected {
  border-left-color: var(--accent-blue);
  background-color: #2b3a4e;
  box-shadow: 0 4px 8px rgba(37, 99, 235, 0.2);
}

.data-list li > div:first-child {
  flex-grow: 1;
}

.data-list li strong {
  font-size: 1.125rem;
  color: var(--text-light);
  display: block;
  margin-bottom: var(--spacing-xs);
}

.data-list li small {
  color: var(--text-muted);
  font-size: 0.875rem;
  display: block;
}

.item-actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-shrink: 0;
  align-items: center;
  flex-wrap: wrap;
}

/* Empty List Message */
.empty-list-message {
  text-align: center;
  padding: var(--spacing-2xl);
  color: var(--text-muted);
  background-color: var(--bg-input);
  border-radius: var(--radius-lg);
  border: 2px dashed var(--border-color);
  margin-top: var(--spacing-md);
}

.empty-list-message p {
  font-size: 1.125rem;
  margin-bottom: var(--spacing-sm);
}

.empty-list-message small {
  font-size: 0.875rem;
  opacity: 0.8;
}

/* Status Indicators */
.status-indicator {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  margin-left: var(--spacing-sm);
}

.status-orcamento {
  background-color: rgba(234, 88, 12, 0.2);
  color: var(--accent-orange);
  border: 1px solid var(--accent-orange);
}

.status-aprovado {
  background-color: rgba(37, 99, 235, 0.2);
  color: var(--accent-blue);
  border: 1px solid var(--accent-blue);
}

.status-finalizado {
  background-color: rgba(22, 163, 74, 0.2);
  color: var(--accent-green);
  border: 1px solid var(--accent-green);
}

.status-cancelado {
  background-color: rgba(239, 68, 68, 0.2);
  color: var(--accent-red-status);
  border: 1px solid var(--accent-red-status);
}

/* Payment Options */
.payment-options-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: var(--spacing-md);
  margin-top: var(--spacing-md);
}

.payment-option {
  padding: var(--spacing-md);
  background-color: var(--bg-input);
  border: 2px solid var(--border-color);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-normal);
  font-size: 0.875rem;
  color: var(--text-muted);
  text-align: center;
  font-weight: 500;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.payment-option:hover {
  background-color: var(--border-color);
  color: var(--text-light);
}

.payment-option.active {
  background-color: var(--accent-blue);
  color: white;
  border-color: var(--accent-blue);
  font-weight: 700;
  box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
}

.payment-option i {
  display: block;
  margin-bottom: var(--spacing-xs);
  font-size: 1.25rem;
}

/* Notification */
#notification {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: var(--spacing-lg) var(--spacing-xl);
  border-radius: var(--radius-lg);
  color: white;
  z-index: 1002;
  text-align: center;
  visibility: hidden;
  transition: all var(--transition-normal);
  max-width: 400px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  font-weight: 500;
  min-width: 300px;
}

#notification.show {
  transform: translateX(-50%) translateY(0);
  visibility: visible;
}

#notification.success {
  background-color: var(--accent-green);
}

#notification.error {
  background-color: #ef4444;
}

#notification.warning {
  background-color: var(--accent-orange);
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  padding: var(--spacing-lg);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease-out;
}

.modal-overlay.active {
  display: flex;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  background-color: var(--bg-card);
  padding: var(--spacing-xl);
  border-radius: var(--radius-lg);
  text-align: center;
  max-width: 400px;
  width: 100%;
  border: 1px solid var(--border-color);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
  animation: slideInUp 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes slideInUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-content h3 {
  margin-bottom: var(--spacing-lg);
  color: var(--primary-red);
  font-size: 1.5rem;
  font-weight: 600;
}

.modal-content p {
  margin-bottom: var(--spacing-xl);
  color: var(--text-light);
  font-size: 1rem;
  line-height: 1.6;
}

.modal-actions {
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
}

.modal-actions .btn {
  margin-top: 0;
  width: auto;
  min-width: 100px;
}

/* Chart Container */
.chart-container {
  padding: var(--spacing-lg);
  background-color: var(--bg-card);
  border-radius: var(--radius-lg);
  margin-top: var(--spacing-lg);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  height: 300px;
}

.chart-container h2 {
  text-align: center;
  margin-bottom: var(--spacing-lg);
}

.chart-container canvas {
  max-height: 250px;
}

/* Skeleton Loading */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--skeleton-base) 25%,
    var(--skeleton-highlight) 50%,
    var(--skeleton-base) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: var(--radius-md);
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.skeleton-item {
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  border-radius: var(--radius-md);
}

.skeleton-text {
  height: 20px;
  margin-bottom: var(--spacing-sm);
}

.skeleton-text.short {
  width: 60%;
}

.skeleton-text.medium {
  width: 80%;
}

.skeleton-text.long {
  width: 100%;
}

/* Responsive Design */
@media (max-width: 768px) {
  .app-container {
    margin: 0;
    border-radius: 0;
    min-height: 100vh;
  }
  
  header {
    padding: var(--spacing-md) var(--spacing-lg);
    border-radius: 0;
  }
  
  header h1 {
    font-size: 1.5rem;
  }
  
  nav {
    padding: var(--spacing-md) var(--spacing-lg);
  }
  
  .tab-content {
    padding: var(--spacing-lg);
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .form-actions .btn {
    width: 100%;
  }
  
  .list-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .filter-controls {
    flex-direction: column;
  }
  
  .item-actions {
    justify-content: center;
    width: 100%;
    margin-top: var(--spacing-md);
  }
  
  .data-list li {
    flex-direction: column;
    align-items: stretch;
  }
}

/* Offline Indicator */
#offline-indicator {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: var(--accent-red-status);
  color: white;
  text-align: center;
  padding: var(--spacing-md);
  z-index: 1004;
  transform: translateY(-100%);
  transition: transform var(--transition-normal);
  font-weight: 500;
}

#offline-indicator.show {
  transform: translateY(0);
}

#offline-indicator i {
  margin-right: var(--spacing-sm);
}
    </style>
</head>
<body>
    <!-- Offline Indicator -->
    <div id="offline-indicator" role="alert" aria-live="assertive">
        <i class="fas fa-wifi"></i>
        <span>Conex√£o perdida - Modo offline</span>
    </div>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Header -->
        <header>
            <h1>
                <i class="fas fa-car-wash"></i>
                R.M. Est√©tica PRO+
            </h1>
            <button class="sync-btn" id="sync-btn" title="Sincronizar dados">
                <i class="fas fa-sync-alt"></i>
            </button>
        </header>

        <!-- Navigation -->
        <nav role="navigation" aria-label="Navega√ß√£o Principal">
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i>
                Painel
            </button>
            <button class="nav-btn" data-tab="clientes">
                <i class="fas fa-users"></i>
                Clientes
            </button>
            <button class="nav-btn" data-tab="servicos">
                <i class="fas fa-tools"></i>
                Servi√ßos
            </button>
            <button class="nav-btn" data-tab="novo-orcamento">
                <i class="fas fa-file-invoice"></i>
                Or√ßamento
            </button>
            <button class="nav-btn" data-tab="historico">
                <i class="fas fa-history"></i>
                Hist√≥rico
            </button>
            <button class="nav-btn" data-tab="crm">
                <i class="fas fa-handshake"></i>
                CRM
            </button>
            <button class="nav-btn" data-tab="despesas">
                <i class="fas fa-credit-card"></i>
                Despesas
            </button>
        </nav>

        <!-- Main Content Area -->
        <main>
            <!-- Dashboard Tab -->
            <section id="dashboard-tab" class="tab-content active" role="tabpanel">
                <div class="dashboard-main-grid">
                    <!-- Metrics Cards -->
                    <div class="metrics-section">
                        <div class="stat-card" data-filter="clientes">
                            <i class="fas fa-users"></i>
                            <div>
                                <h3>Total de Clientes</h3>
                                <p id="stat-clientes">0</p>
                            </div>
                        </div>
                        <div class="stat-card" data-filter="pendentes">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h3>Or√ßamentos Pendentes</h3>
                                <p id="stat-pendentes">0</p>
                            </div>
                        </div>
                        <div class="stat-card" data-filter="aprovados">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3>Aprovados</h3>
                                <p id="stat-aprovados">0</p>
                            </div>
                        </div>
                        <div class="stat-card" data-filter="finalizados">
                            <i class="fas fa-trophy"></i>
                            <div>
                                <h3>Finalizados no M√™s</h3>
                                <p id="stat-finalizados-mes">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-dollar-sign"></i>
                            <div>
                                <h3>Faturamento Total</h3>
                                <p id="stat-faturamento-total">R$ 0,00</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chart and Recent Activity -->
                    <div class="dashboard-side-content">
                        <div class="card">
                            <h2><i class="fas fa-chart-bar"></i> Estat√≠sticas Mensais</h2>
                            <div class="chart-container">
                                <canvas id="monthly-finalized-chart-canvas"></canvas>
                            </div>
                        </div>
                        
                        <div class="card data-list">
                            <h2><i class="fas fa-clock"></i> Atividade Recente</h2>
                            <ul id="recent-activity-list">
                                <div class="empty-list-message">
                                    <p>Nenhuma atividade recente</p>
                                    <small>Crie seu primeiro or√ßamento para come√ßar</small>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clientes Tab -->
            <section id="clientes-tab" class="tab-content" role="tabpanel">
                <div class="grid-layout">
                    <div class="card">
                        <h2 id="cliente-form-title"><i class="fas fa-user-plus"></i> Cadastrar Cliente</h2>
                        <form id="cliente-form">
                            <input type="hidden" id="cliente-id">
                            
                            <div class="form-group">
                                <label for="cliente-nome">Nome Completo *</label>
                                <input type="text" id="cliente-nome" required placeholder="Digite o nome completo">
                                <div class="validation-message">Nome √© obrigat√≥rio</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-telefone">Telefone *</label>
                                <input type="tel" id="cliente-telefone" required placeholder="(99) 99999-9999">
                                <div class="validation-message">Telefone deve ter formato v√°lido</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-carro">Carro *</label>
                                <input type="text" id="cliente-carro" required placeholder="Ex: Honda Civic 2020">
                                <div class="validation-message">Carro √© obrigat√≥rio</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="cliente-placa">Placa *</label>
                                <input type="text" id="cliente-placa" required placeholder="ABC-1234 ou ABC1D23">
                                <div class="validation-message">Placa deve ter formato v√°lido</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Salvar Cliente
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-cliente" style="display: none;">
                                    <i class="fas fa-times"></i> Cancelar Edi√ß√£o
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-users"></i> Lista de Clientes</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-cliente" placeholder="Buscar por nome, placa ou telefone...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="sort-container">
                                <select id="sort-clientes">
                                    <option value="nome-asc">Nome (A-Z)</option>
                                    <option value="nome-desc">Nome (Z-A)</option>
                                    <option value="carro-asc">Carro (A-Z)</option>
                                    <option value="carro-desc">Carro (Z-A)</option>
                                </select>
                            </div>
                            
                            <button class="btn btn-sm btn-secondary" id="export-clientes-csv">
                                <i class="fas fa-download"></i> Exportar CSV
                            </button>
                        </div>

                        <ul id="clientes-lista">
                            <div class="empty-list-message">
                                <p>Nenhum cliente cadastrado</p>
                                <small>Cadastre o primeiro cliente para come√ßar</small>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Servi√ßos Tab -->
            <section id="servicos-tab" class="tab-content" role="tabpanel">
                <div class="grid-layout">
                    <div class="card">
                        <h2 id="servico-form-title"><i class="fas fa-plus"></i> Cadastrar Servi√ßo</h2>
                        <form id="servico-form">
                            <input type="hidden" id="servico-id">
                            
                            <div class="form-group">
                                <label for="servico-descricao">Descri√ß√£o *</label>
                                <input type="text" id="servico-descricao" required placeholder="Ex: Lavagem completa">
                                <div class="validation-message">Descri√ß√£o √© obrigat√≥ria</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-group">
                                <label for="servico-valor">Valor (R$) *</label>
                                <input type="number" id="servico-valor" required step="0.01" min="0.01" placeholder="0.00">
                                <div class="validation-message">Valor deve ser maior que zero</div>
                                <i class="validation-icon fas"></i>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Salvar Servi√ßo
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-servico" style="display: none;">
                                    <i class="fas fa-times"></i> Cancelar Edi√ß√£o
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-tools"></i> Lista de Servi√ßos</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-servico" placeholder="Buscar por descri√ß√£o...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="sort-container">
                                <select id="sort-servicos">
                                    <option value="descricao-asc">Descri√ß√£o (A-Z)</option>
                                    <option value="descricao-desc">Descri√ß√£o (Z-A)</option>
                                    <option value="valor-asc">Valor (Menor)</option>
                                    <option value="valor-desc">Valor (Maior)</option>
                                </select>
                            </div>
                            
                            <button class="btn btn-sm btn-secondary" id="export-servicos-csv">
                                <i class="fas fa-download"></i> Exportar CSV
                            </button>
                        </div>

                        <ul id="servicos-lista">
                            <div class="empty-list-message">
                                <p>Nenhum servi√ßo cadastrado</p>
                                <small>Cadastre o primeiro servi√ßo para come√ßar</small>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Novo Or√ßamento Tab -->
            <section id="novo-orcamento-tab" class="tab-content" role="tabpanel">
                <div class="card">
                    <h2 id="orcamento-form-title"><i class="fas fa-file-invoice"></i> Novo Or√ßamento</h2>
                    <form id="orcamento-form">
                        <input type="hidden" id="orcamento-id-to-edit">
                        
                        <div class="form-group">
                            <label for="orcamento-cliente">Cliente *</label>
                            <select id="orcamento-cliente" required>
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>

                        <div class="service-selection">
                            <div class="form-group">
                                <label for="orcamento-servico-select">Servi√ßo</label>
                                <select id="orcamento-servico-select">
                                    <option value="">Selecione um servi√ßo</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="orcamento-servico-quantidade">Quantidade</label>
                                <input type="number" id="orcamento-servico-quantidade" min="1" value="1">
                            </div>
                            
                            <button type="button" class="btn btn-secondary" id="add-servico-btn">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>

                        <div class="services-added">
                            <h3><i class="fas fa-list"></i> Servi√ßos Adicionados</h3>
                            <ul id="orcamento-servicos-adicionados">
                                <p style="text-align: center; color: var(--text-muted);">Nenhum servi√ßo adicionado</p>
                            </ul>
                        </div>

                        <div class="form-group">
                            <label for="orcamento-desconto">Desconto (R$)</label>
                            <input type="number" id="orcamento-desconto" step="0.01" min="0" value="0" placeholder="0.00">
                        </div>

                        <div class="form-group">
                            <label>Formas de Pagamento *</label>
                            <div id="payment-options" class="payment-options-group">
                                <button type="button" class="payment-option" data-value="Pix">
                                    <i class="fas fa-qrcode"></i> Pix
                                </button>
                                <button type="button" class="payment-option" data-value="Dinheiro">
                                    <i class="fas fa-money-bill"></i> Dinheiro
                                </button>
                                <button type="button" class="payment-option" data-value="Cr√©dito">
                                    <i class="fas fa-credit-card"></i> Cr√©dito
                                </button>
                                <button type="button" class="payment-option" data-value="D√©bito">
                                    <i class="fas fa-credit-card"></i> D√©bito
                                </button>
                                <button type="button" class="payment-option" data-value="Boleto">
                                    <i class="fas fa-barcode"></i> Boleto
                                </button>
                            </div>
                            <div id="payment-options-validation" class="validation-message" style="display: none;">
                                Selecione pelo menos uma forma de pagamento
                            </div>
                        </div>

                        <div id="orcamento-total">
                            <strong>Total: R$ 0,00</strong>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Salvar Or√ßamento
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancelar-edicao-orcamento" style="display: none;">
                                <i class="fas fa-times"></i> Cancelar Edi√ß√£o
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Hist√≥rico Tab -->
            <section id="historico-tab" class="tab-content" role="tabpanel">
                <div class="historico-layout">
                    <div class="card data-list">
                        <h2><i class="fas fa-history"></i> Hist√≥rico de Or√ßamentos</h2>
                        
                        <div class="list-controls">
                            <div class="search-container">
                                <input type="text" id="search-historico" placeholder="Buscar por cliente, placa ou data...">
                                <i class="fas fa-search"></i>
                            </div>
                            
                            <div class="filter-controls">
                                <select id="filter-status">
                                    <option value="">Todos os Status</option>
                                    <option value="Or√ßamento">Or√ßamento</option>
                                    <option value="Aprovado">Aprovado</option>
                                    <option value="Finalizado">Finalizado</option>
                                    <option value="Cancelado">Cancelado</option>
                                </select>
                                
                                <input type="date" id="filter-start-date" title="Data inicial">
                                <input type="date" id="filter-end-date" title="Data final">
                                
                                <button class="btn btn-sm btn-secondary" id="clear-filters-btn">
                                    <i class="fas fa-eraser"></i> Limpar
                                </button>
                            </div>
                        </div>

                        <ul id="historico-lista">
                            <div class="empty-list-message">
                                <p>Nenhum or√ßamento encontrado</p>
                                <small>Crie o primeiro or√ßamento para come√ßar</small>
                            </div>
                        </ul>
                    </div>

                    <div class="card" id="detalhes-orcamento-container" style="display: none;">
                        <h2><i class="fas fa-file-alt"></i> Detalhes do Or√ßamento</h2>
                        <p>Selecione um or√ßamento da lista para ver os detalhes aqui.</p>
                    </div>
                </div>
            </section>

            <!-- CRM Tab -->
            <section id="crm-tab" class="tab-content" role="tabpanel">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Total de Intera√ß√µes</h3>
                        <p id="crm-total-interactions">0</p>
                    </div>
                    <div class="metric-card">
                        <h3>Clientes Ativos</h3>
                        <p id="crm-active-clients">0</p>
                    </div>
                    <div class="metric-card">
                        <h3>Follow-ups Pendentes</h3>
                        <p id="crm-pending-followups">0</p>
                    </div>
                </div>

                <div class="card">
                    <h2><i class="fas fa-comment-dots"></i> Modelos de Mensagem</h2>
                    <div class="template-group">
                        <label>Agradecimento</label>
                        <textarea id="template-agradecimento" placeholder="Modelo de agradecimento...">Ol√° [NOME]! Obrigado por escolher a R.M. Est√©tica Automotiva. Ficamos muito felizes em cuidar do seu [CARRO]!</textarea>
                    </div>
                    <div class="template-group">
                        <label>Follow-up</label>
                        <textarea id="template-followup" placeholder="Modelo de follow-up...">Oi [NOME]! Como est√° o seu [CARRO] ap√≥s nosso servi√ßo? Estamos aqui para qualquer d√∫vida ou novo agendamento!</textarea>
                    </div>
                    <div class="template-group">
                        <label>Promo√ß√£o</label>
                        <textarea id="template-promocao" placeholder="Modelo de promo√ß√£o...">üöó Oferta especial para voc√™, [NOME]! Aproveite nossos servi√ßos com desconto especial. Entre em contato!</textarea>
                    </div>
                    <div class="template-group">
                        <label>Lembrete</label>
                        <textarea id="template-lembrete" placeholder="Modelo de lembrete...">Ol√° [NOME]! Que tal agendar uma nova sess√£o para o seu [CARRO]? Estamos com agenda dispon√≠vel!</textarea>
                    </div>
                    <div class="template-group">
                        <label>Pesquisa</label>
                        <textarea id="template-pesquisa" placeholder="Modelo de pesquisa...">Oi [NOME]! Gostaria de saber sua opini√£o sobre o servi√ßo realizado no seu [CARRO]. Sua avalia√ß√£o √© muito importante!</textarea>
                    </div>
                    <div class="template-group">
                        <label>Reativa√ß√£o</label>
                        <textarea id="template-reativacao" placeholder="Modelo de reativa√ß√£o...">Ol√° [NOME]! Sentimos sua falta! Que tal voltar a cuidar do seu [CARRO] com a gente? Temos novidades!</textarea>
                    </div>
                </div>
            </section>

            <!-- Despesas Tab -->
            <section id="despesas-tab" class="tab-content" role="tabpanel">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Total do M√™s</h3>
                        <p id="despesas-total-mes">R$ 0,00</p>
                    </div>
                    <div class="metric-card">
                        <h3>Despesas de Hoje</h3>
                        <p id="despesas-hoje">R$ 0,00</p>
                    </div>
                    <div class="metric-card">
                        <h3>M√©dia Di√°ria</h3>
                        <p id="despesas-media-diaria">R$ 0,00</p>
                    </div>
                </div>

                <div class="main-layout">
                    <div class="card">
                        <h2 id="despesa-form-title"><i class="fas fa-plus"></i> Nova Despesa</h2>
                        <form id="despesa-form">
                            <input type="hidden" id="despesa-id">
                            
                            <div class="form-group">
                                <label for="despesa-descricao">Descri√ß√£o *</label>
                                <input type="text" id="despesa-descricao" required placeholder="Ex: Compra de produtos">
                            </div>

                            <div class="form-group">
                                <label for="despesa-valor">Valor (R$) *</label>
                                <input type="number" id="despesa-valor" required step="0.01" min="0.01" placeholder="0.00">
                            </div>

                            <div class="form-group">
                                <label for="despesa-categoria">Categoria *</label>
                                <select id="despesa-categoria" required>
                                    <option value="">Selecione uma categoria</option>
                                    <option value="Produtos">Produtos</option>
                                    <option value="Equipamentos">Equipamentos</option>
                                    <option value="Marketing">Marketing</option>
                                    <option value="Combust√≠vel">Combust√≠vel</option>
                                    <option value="Outros">Outros</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="despesa-data">Data *</label>
                                <input type="date" id="despesa-data" required>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Salvar Despesa
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancelar-edicao-despesa" style="display: none;">
                                    <i class="fas fa-times"></i> Cancelar Edi√ß√£o
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="card data-list">
                        <h2><i class="fas fa-credit-card"></i> Lista de Despesas</h2>
                        
                        <div class="list-controls">
                            <div class="filter-controls">
                                <input type="month" id="filter-despesas-mes" title="Filtrar por m√™s">
                                <button class="btn btn-sm btn-secondary" id="export-despesas-csv">
                                    <i class="fas fa-download"></i> Exportar CSV
                                </button>
                            </div>
                        </div>

                        <ul id="despesas-lista">
                            <div class="empty-list-message">
                                <p>Nenhuma despesa cadastrada</p>
                                <small>Registre a primeira despesa para come√ßar</small>
                            </div>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Global Modals and Overlays -->
    <div id="notification">
        <span id="notification-message"></span>
    </div>

    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title">Confirma√ß√£o</h3>
            <p id="modal-message">Tem certeza que deseja realizar esta a√ß√£o?</p>
            <div class="modal-actions">
                <button class="btn btn-primary" id="modal-confirm-btn">Confirmar</button>
                <button class="btn btn-secondary" id="modal-cancel-btn">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    
    <script>
// R.M. Est√©tica Automotiva PRO+ - Sistema de Gerenciamento
// JavaScript Principal - Todas as funcionalidades integradas

// ============================================================================
// CONFIGURA√á√ïES E CONSTANTES
// ============================================================================

// Dados do estabelecimento
const ESTABELECIMENTO = {
    nome: "R.M. Est√©tica Automotiva",
    cnpj: "18.637.639/0001-48",
    telefone: "24999486232",
    endereco: "Rua 40, TV - Recanto dos P√°ssaros, Pq. Mambucaba, Angra dos Reis - RJ",
    agradecimento: "Obrigado pela prefer√™ncia e volte sempre! üëç"
};

// Estado global da aplica√ß√£o
const state = {
    // Dados principais
    clientes: [],
    servicos: [],
    orcamentos: [],
    despesas: [],
    
    // Vari√°veis de controle
    isOnline: navigator.onLine
};

// ============================================================================
// UTILIT√ÅRIOS E SELETORES DOM
// ============================================================================

// Seletores DOM simplificados
const $ = (selector) => document.querySelector(selector);
const $$ = (selector) => document.querySelectorAll(selector);

// Fun√ß√£o para mostrar notifica√ß√µes
function showNotification(message, type = 'success') {
    const notification = $('#notification');
    const messageElement = $('#notification-message');
    
    messageElement.textContent = message;
    notification.className = `show ${type}`;
    
    setTimeout(() => {
        notification.classList.remove('show');
    }, 4000);
}

// Formata√ß√£o de moeda brasileira
function formatCurrency(value) {
    return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL'
    }).format(value || 0);
}

// Formata√ß√£o de data
function formatDate(dateString) {
    if (!dateString) return 'Data n√£o informada';
    return new Intl.DateTimeFormat('pt-BR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
    }).format(new Date(dateString));
}

// Formata√ß√£o de telefone
function formatPhone(value) {
    if (!value) return '';
    const cleaned = value.replace(/\D/g, '');
    const match = cleaned.match(/^(\d{2})(\d{4,5})(\d{4})$/);
    if (match) {
        return `(${match[1]}) ${match[2]}-${match[3]}`;
    }
    return value;
}

// ============================================================================
// GERENCIAMENTO DE ABAS
// ============================================================================

function showTab(tabId, filterParams = {}) {
    // Remove classe active de todas as abas e bot√µes
    $$('.tab-content').forEach(tab => tab.classList.remove('active'));
    $$('.nav-btn').forEach(btn => btn.classList.remove('active'));
    
    // Ativa a aba selecionada
    $(`#${tabId}-tab`).classList.add('active');
    $(`.nav-btn[data-tab="${tabId}"]`).classList.add('active');
    
    // Scroll para o topo
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    // Simula√ß√£o de dados para demonstra√ß√£o
    if (tabId === 'dashboard') {
        updateDashboard();
    } else if (tabId === 'clientes') {
        renderClientes();
    } else if (tabId === 'servicos') {
        renderServicos();
    } else if (tabId === 'despesas') {
        renderDespesas();
    }
    
    showNotification(`Navegando para: ${getTabName(tabId)}`, 'success');
}

function getTabName(tabId) {
    const names = {
        'dashboard': 'Painel',
        'clientes': 'Clientes',
        'servicos': 'Servi√ßos',
        'novo-orcamento': 'Or√ßamento',
        'historico': 'Hist√≥rico',
        'crm': 'CRM',
        'despesas': 'Despesas'
    };
    return names[tabId] || tabId;
}

// ============================================================================
// DASHBOARD - PAINEL PRINCIPAL
// ============================================================================

function updateDashboard() {
    // Simula√ß√£o de m√©tricas para demonstra√ß√£o
    $('#stat-clientes').textContent = state.clientes.length;
    $('#stat-pendentes').textContent = '3';
    $('#stat-aprovados').textContent = '5';
    $('#stat-finalizados-mes').textContent = '12';
    $('#stat-faturamento-total').textContent = formatCurrency(15000);
    
    // Simula atividade recente
    const recentList = $('#recent-activity-list');
    recentList.innerHTML = `
        <li>
            <div>
                <strong>Jo√£o Silva</strong>
                <small>Honda Civic - ABC-1234</small>
                <small>${formatDate(new Date())}</small>
            </div>
            <div class="item-actions">
                <span class="status-indicator status-finalizado">Finalizado</span>
                <span style="font-weight: bold; color: var(--accent-green);">${formatCurrency(150)}</span>
            </div>
        </li>
        <li>
            <div>
                <strong>Maria Santos</strong>
                <small>Toyota Corolla - XYZ-5678</small>
                <small>${formatDate(new Date())}</small>
            </div>
            <div class="item-actions">
                <span class="status-indicator status-aprovado">Aprovado</span>
                <span style="font-weight: bold; color: var(--accent-green);">${formatCurrency(200)}</span>
            </div>
        </li>
    `;
}

// ============================================================================
// CLIENTES - GEST√ÉO DE CLIENTES
// ============================================================================

function renderClientes() {
    const clientesList = $('#clientes-lista');
    
    if (state.clientes.length === 0) {
        clientesList.innerHTML = `
            <div class="empty-list-message">
                <p>Nenhum cliente cadastrado</p>
                <small>Cadastre o primeiro cliente para come√ßar</small>
            </div>
        `;
        return;
    }
    
    clientesList.innerHTML = state.clientes.map(cliente => `
        <li data-id="${cliente.id}">
            <div>
                <strong>${cliente.nome}</strong>
                <small>${cliente.carro} - ${cliente.placa}</small>
                <small>${formatPhone(cliente.telefone)}</small>
            </div>
            <div class="item-actions">
                <button class="btn btn-sm btn-secondary">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button class="btn btn-sm btn-primary">
                    <i class="fas fa-eye"></i> Detalhes
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        </li>
    `).join('');
}

async function handleClienteSubmit(e) {
    e.preventDefault();
    
    const nome = $('#cliente-nome').value.trim();
    const telefone = $('#cliente-telefone').value.trim();
    const carro = $('#cliente-carro').value.trim();
    const placa = $('#cliente-placa').value.trim().toUpperCase();
    
    // Valida√ß√µes b√°sicas
    if (!nome || !telefone || !carro || !placa) {
        showNotification('Todos os campos s√£o obrigat√≥rios', 'error');
        return;
    }
    
    // Cria cliente local (demonstra√ß√£o)
    const novoCliente = {
        id: Date.now().toString(),
        nome,
        telefone,
        carro,
        placa,
        created_at: new Date().toISOString()
    };
    
    state.clientes.push(novoCliente);
    
    showNotification('Cliente cadastrado com sucesso!', 'success');
    $('#cliente-form').reset();
    renderClientes();
    updateDashboard();
}

// ============================================================================
// SERVI√áOS - GEST√ÉO DE SERVI√áOS
// ============================================================================

function renderServicos() {
    const servicosList = $('#servicos-lista');
    
    if (state.servicos.length === 0) {
        servicosList.innerHTML = `
            <div class="empty-list-message">
                <p>Nenhum servi√ßo cadastrado</p>
                <small>Cadastre o primeiro servi√ßo para come√ßar</small>
            </div>
        `;
        return;
    }
    
    servicosList.innerHTML = state.servicos.map(servico => `
        <li data-id="${servico.id}">
            <div>
                <strong>${servico.descricao}</strong>
                <small>${formatCurrency(servico.valor)}</small>
            </div>
            <div class="item-actions">
                <button class="btn btn-sm btn-secondary">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        </li>
    `).join('');
}

async function handleServicoSubmit(e) {
    e.preventDefault();
    
    const descricao = $('#servico-descricao').value.trim();
    const valor = parseFloat($('#servico-valor').value);
    
    // Valida√ß√µes b√°sicas
    if (!descricao || !valor || valor <= 0) {
        showNotification('Preencha todos os campos corretamente', 'error');
        return;
    }
    
    // Cria servi√ßo local (demonstra√ß√£o)
    const novoServico = {
        id: Date.now().toString(),
        descricao,
        valor,
        created_at: new Date().toISOString()
    };
    
    state.servicos.push(novoServico);
    
    showNotification('Servi√ßo cadastrado com sucesso!', 'success');
    $('#servico-form').reset();
    renderServicos();
}

// ============================================================================
// DESPESAS - GEST√ÉO DE DESPESAS
// ============================================================================

function renderDespesas() {
    const despesasList = $('#despesas-lista');
    
    if (state.despesas.length === 0) {
        despesasList.innerHTML = `
            <div class="empty-list-message">
                <p>Nenhuma despesa cadastrada</p>
                <small>Registre a primeira despesa para come√ßar</small>
            </div>
        `;
        return;
    }
    
    despesasList.innerHTML = state.despesas.map(despesa => `
        <li data-id="${despesa.id}">
            <div>
                <strong>${despesa.descricao}</strong>
                <small>${despesa.categoria} - ${formatDate(despesa.data)}</small>
                <small>${formatCurrency(despesa.valor)}</small>
            </div>
            <div class="item-actions">
                <button class="btn btn-sm btn-secondary">
                    <i class="fas fa-edit"></i> Editar
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        </li>
    `).join('');
    
    // Atualiza m√©tricas
    const totalMes = state.despesas.reduce((total, d) => total + d.valor, 0);
    $('#despesas-total-mes').textContent = formatCurrency(totalMes);
    $('#despesas-hoje').textContent = formatCurrency(0);
    $('#despesas-media-diaria').textContent = formatCurrency(totalMes / 30);
}

async function handleDespesaSubmit(e) {
    e.preventDefault();
    
    const descricao = $('#despesa-descricao').value.trim();
    const valor = parseFloat($('#despesa-valor').value);
    const categoria = $('#despesa-categoria').value;
    const data = $('#despesa-data').value;
    
    // Valida√ß√µes b√°sicas
    if (!descricao || !valor || valor <= 0 || !categoria || !data) {
        showNotification('Preencha todos os campos corretamente', 'error');
        return;
    }
    
    // Cria despesa local (demonstra√ß√£o)
    const novaDespesa = {
        id: Date.now().toString(),
        descricao,
        valor,
        categoria,
        data,
        created_at: new Date().toISOString()
    };
    
    state.despesas.push(novaDespesa);
    
    showNotification('Despesa registrada com sucesso!', 'success');
    $('#despesa-form').reset();
    $('#despesa-data').value = new Date().toISOString().split('T')[0];
    renderDespesas();
}

// ============================================================================
// INICIALIZA√á√ÉO DA APLICA√á√ÉO
// ============================================================================

document.addEventListener('DOMContentLoaded', async () => {
    // Define data atual nos campos de data
    $('#despesa-data').value = new Date().toISOString().split('T')[0];
    
    // Event listeners para navega√ß√£o
    $$('.nav-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const tabId = e.currentTarget.dataset.tab;
            showTab(tabId);
        });
    });
    
    // Event listeners para dashboard
    $$('.stat-card').forEach(card => {
        card.addEventListener('click', (e) => {
            const filter = e.currentTarget.dataset.filter;
            if (filter === 'clientes') {
                showTab('clientes');
            } else if (filter === 'pendentes') {
                showTab('historico', { status: 'Or√ßamento' });
            } else if (filter === 'aprovados') {
                showTab('historico', { status: 'Aprovado' });
            } else if (filter === 'finalizados') {
                showTab('historico', { status: 'Finalizado' });
            }
        });
    });
    
    // Event listeners para formul√°rios
    $('#cliente-form').addEventListener('submit', handleClienteSubmit);
    $('#servico-form').addEventListener('submit', handleServicoSubmit);
    $('#despesa-form').addEventListener('submit', handleDespesaSubmit);
    
    // Event listeners para formas de pagamento
    $('#payment-options').addEventListener('click', (e) => {
        if (e.target.classList.contains('payment-option')) {
            e.target.classList.toggle('active');
            showNotification(`Forma de pagamento ${e.target.dataset.value} ${e.target.classList.contains('active') ? 'selecionada' : 'removida'}`, 'success');
        }
    });
    
    // Event listener para sincroniza√ß√£o
    $('#sync-btn').addEventListener('click', () => {
        $('#sync-btn').classList.add('syncing');
        setTimeout(() => {
            $('#sync-btn').classList.remove('syncing');
            showNotification('Dados sincronizados com sucesso!', 'success');
        }, 2000);
    });
    
    // Event listeners para exporta√ß√£o CSV (demonstra√ß√£o)
    $('#export-clientes-csv').addEventListener('click', () => {
        showNotification('Funcionalidade de exporta√ß√£o dispon√≠vel na vers√£o completa', 'warning');
    });
    
    $('#export-servicos-csv').addEventListener('click', () => {
        showNotification('Funcionalidade de exporta√ß√£o dispon√≠vel na vers√£o completa', 'warning');
    });
    
    $('#export-despesas-csv').addEventListener('click', () => {
        showNotification('Funcionalidade de exporta√ß√£o dispon√≠vel na vers√£o completa', 'warning');
    });
    
    // Dados de demonstra√ß√£o
    state.clientes = [
        {
            id: '1',
            nome: 'Jo√£o Silva',
            telefone: '11999887766',
            carro: 'Honda Civic 2020',
            placa: 'ABC-1234',
            created_at: new Date().toISOString()
        },
        {
            id: '2', 
            nome: 'Maria Santos',
            telefone: '11888776655',
            carro: 'Toyota Corolla 2021',
            placa: 'XYZ-5678',
            created_at: new Date().toISOString()
        }
    ];
    
    state.servicos = [
        {
            id: '1',
            descricao: 'Lavagem Completa',
            valor: 25.00,
            created_at: new Date().toISOString()
        },
        {
            id: '2',
            descricao: 'Enceramento',
            valor: 40.00,
            created_at: new Date().toISOString()
        }
    ];
    
    state.despesas = [
        {
            id: '1',
            descricao: 'Compra de produtos de limpeza',
            valor: 150.00,
            categoria: 'Produtos',
            data: new Date().toISOString().split('T')[0],
            created_at: new Date().toISOString()
        }
    ];
    
    // Inicializa√ß√£o
    showNotification('Sistema R.M. Est√©tica PRO+ carregado com sucesso!', 'success');
    updateDashboard();
});

// ============================================================================
// FUN√á√ïES GLOBAIS PARA ACESSO EXTERNO
// ============================================================================

window.rmEstetica = {
    state,
    showTab,
    showNotification,
    formatCurrency,
    formatDate,
    formatPhone
};
    </script>
</body>
</html>